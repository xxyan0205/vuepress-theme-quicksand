import{r as n,o as s,c as a,a as e,w as t,F as p,b as o,d as c}from"./app.e548ecbe.js";const l={},i=e("h1",{id:"usage-of-client-app-enhance",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#usage-of-client-app-enhance","aria-hidden":"true"},"#"),o(" Usage of Client App Enhance")],-1),r=o("The "),u=o("clientAppEnhanceFiles"),d=o(" hook of Plugin API allows you to set the path to the client app enhance files. You can use it in your plugin or theme:"),k=c('<div class="theme-code-dark"><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> path <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@vuepress/utils&#39;</span>\n\n<span class="token keyword">const</span> pluginOrTheme <span class="token operator">=</span> <span class="token punctuation">{</span>\n  clientAppEnhanceFiles<span class="token operator">:</span> path<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>__dirname<span class="token punctuation">,</span> <span class="token string">&#39;./path/to/clientAppEnhance.ts&#39;</span><span class="token punctuation">)</span><span class="token punctuation">,</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></div>',1),h=o("Then create a "),m=e("code",null,"clientAppEnhance.ts",-1),b=o(" file. You can make use of the "),f=o("defineClientAppEnhance"),g=o(" helper to get the types hint. Notice that the function can be either synchronous or asynchronous."),y=c('<div class="theme-code-dark"><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineClientAppEnhance <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@vuepress/client&#39;</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineClientAppEnhance</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span> app<span class="token punctuation">,</span> router<span class="token punctuation">,</span> siteData <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n  <span class="token comment">// ...</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></div>',1),v=o("The "),w=e("code",null,"app",-1),_=o(" is the Vue application instance that created by "),A={href:"https://v3.vuejs.org/api/application-api.html",target:"_blank",rel:"noopener noreferrer"},x=o("createApp"),E=o("."),C=o("The "),R=e("code",null,"router",-1),S=o(" is the Vue Router instance that created by "),F={href:"https://next.router.vuejs.org/api/#createrouter",target:"_blank",rel:"noopener noreferrer"},T=o("createRouter"),M=o("."),j=o("The "),I=e("code",null,"siteData",-1),D=o(" is an object that generated from user config, including "),V=o("base"),N=o(", "),O=o("lang"),P=o(", "),Y=o("title"),U=o(", "),B=o("description"),G=o(", "),L=o("head"),W=o(" and "),q=o("locales"),z=o("."),H=e("p",null,"The client app enhance will be invoked after the client app is created. It's possible to implement any enhancements to the Vue application.",-1),J=e("div",{class:"custom-container tip"},[e("p",{class:"custom-container-title"},"TIP"),e("p",null,[o("For ease of use in user config, the "),e("code",null,".vuepress/clientAppEnhance.{js,ts}"),o(" file will be used as the client app enhance file implicitly, unless you set "),e("code",null,"clientAppEnhanceFiles"),o(" explicitly in the config file.")])],-1),K=e("h2",{id:"register-vue-components",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#register-vue-components","aria-hidden":"true"},"#"),o(" Register Vue Components")],-1),Q=o("You can register global Vue components via the "),X={href:"https://v3.vuejs.org/api/application-api.html#component",target:"_blank",rel:"noopener noreferrer"},Z=o("component"),$=o(" method:"),nn=c('<div class="theme-code-dark"><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineClientAppEnhance <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@vuepress/client&#39;</span>\n<span class="token keyword">import</span> MyComponent <span class="token keyword">from</span> <span class="token string">&#39;./MyComponent.vue&#39;</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineClientAppEnhance</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span> app<span class="token punctuation">,</span> router<span class="token punctuation">,</span> siteData <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n  app<span class="token punctuation">.</span><span class="token function">component</span><span class="token punctuation">(</span><span class="token string">&#39;MyComponent&#39;</span><span class="token punctuation">,</span> MyComponent<span class="token punctuation">)</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></div><h2 id="use-non-ssr-friendly-features" tabindex="-1"><a class="header-anchor" href="#use-non-ssr-friendly-features" aria-hidden="true">#</a> Use Non-SSR-Friendly Features</h2><p>VuePress will generate a SSR application to pre-render pages during build. Generally speaking, if a code snippet is using Browser / DOM APIs before client app is mounted, we call it non-SSR-friendly.</p>',3),sn=o("We already provides a "),an=o("ClientOnly"),en=o(" component to wrap non-SSR-friendly content."),tn=o("In client app enhance files, you can make use of the "),pn=e("code",null,[o("_"),e("wbr"),o("_SSR__")],-1),on=o(" flag for that purpose."),cn=c('<div class="theme-code-dark"><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineClientAppEnhance <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@vuepress/client&#39;</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineClientAppEnhance</span><span class="token punctuation">(</span><span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">{</span> app<span class="token punctuation">,</span> router<span class="token punctuation">,</span> siteData <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n  <span class="token keyword">if</span> <span class="token punctuation">(</span><span class="token operator">!</span>_<wbr>_SSR__<span class="token punctuation">)</span> <span class="token punctuation">{</span>\n    <span class="token keyword">const</span> nonSsrFriendlyModule <span class="token operator">=</span> <span class="token keyword">await</span> <span class="token keyword">import</span><span class="token punctuation">(</span><span class="token string">&#39;non-ssr-friendly-module&#39;</span><span class="token punctuation">)</span>\n    <span class="token comment">// ...</span>\n  <span class="token punctuation">}</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div></div><h2 id="use-router-methods" tabindex="-1"><a class="header-anchor" href="#use-router-methods" aria-hidden="true">#</a> Use Router Methods</h2>',2),ln=o("You can make use of the "),rn={href:"https://next.router.vuejs.org/api/#router-methods",target:"_blank",rel:"noopener noreferrer"},un=o("Router Methods"),dn=o(" that provided by vue-router. For example, add navigation guard:"),kn=c('<div class="theme-code-dark"><div class="language-typescript ext-ts line-numbers-mode"><pre class="language-typescript"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> defineClientAppEnhance <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">&#39;@vuepress/client&#39;</span>\n\n<span class="token keyword">export</span> <span class="token keyword">default</span> <span class="token function">defineClientAppEnhance</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">{</span> app<span class="token punctuation">,</span> router<span class="token punctuation">,</span> siteData <span class="token punctuation">}</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n  router<span class="token punctuation">.</span><span class="token function">beforeEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>to<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;before navigation&#39;</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span>\n\n  router<span class="token punctuation">.</span><span class="token function">afterEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span>to<span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>\n    <span class="token builtin">console</span><span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&#39;after navigation&#39;</span><span class="token punctuation">)</span>\n  <span class="token punctuation">}</span><span class="token punctuation">)</span>\n<span class="token punctuation">}</span><span class="token punctuation">)</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></div><div class="custom-container warning"><p class="custom-container-title">WARNING</p><p>It&#39;s not recommended to use <code>addRoute</code> method to add dynamic routes here, because those routes will <strong>NOT</strong> be pre-rendered in build mode.</p><p>But you can still do that if you understand the drawback.</p></div>',2);l.render=function(o,c){const l=n("RouterLink"),hn=n("OutboundLink");return s(),a(p,null,[i,e("p",null,[r,e(l,{to:"/reference/plugin-api.html#clientappenhancefiles"},{default:t((()=>[u])),_:1}),d]),k,e("p",null,[h,m,b,e(l,{to:"/reference/client-api.html#defineclientappenhance"},{default:t((()=>[f])),_:1}),g]),y,e("ul",null,[e("li",null,[v,w,_,e("a",A,[x,e(hn)]),E]),e("li",null,[C,R,S,e("a",F,[T,e(hn)]),M]),e("li",null,[j,I,D,e(l,{to:"/reference/config.html#base"},{default:t((()=>[V])),_:1}),N,e(l,{to:"/reference/config.html#lang"},{default:t((()=>[O])),_:1}),P,e(l,{to:"/reference/config.html#title"},{default:t((()=>[Y])),_:1}),U,e(l,{to:"/reference/config.html#description"},{default:t((()=>[B])),_:1}),G,e(l,{to:"/reference/config.html#head"},{default:t((()=>[L])),_:1}),W,e(l,{to:"/reference/config.html#locales"},{default:t((()=>[q])),_:1}),z])]),H,J,K,e("p",null,[Q,e("a",X,[Z,e(hn)]),$]),nn,e("p",null,[sn,e(l,{to:"/reference/components.html#clientonly"},{default:t((()=>[an])),_:1}),en]),e("p",null,[tn,e(l,{to:"/reference/client-api.html#ssr"},{default:t((()=>[pn])),_:1}),on]),cn,e("p",null,[ln,e("a",rn,[un,e(hn)]),dn]),kn],64)};export default l;
