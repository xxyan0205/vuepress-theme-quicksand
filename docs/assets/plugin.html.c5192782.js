import{r as n,o as s,c as a,a as e,w as t,F as l,b as o,d as i}from"./app.ae737f76.js";const p={},r=e("h1",{id:"writing-a-plugin",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#writing-a-plugin","aria-hidden":"true"},"#"),o(" Writing a Plugin")],-1),c={class:"custom-container tip"},u=e("p",{class:"custom-container-title"},"TIP",-1),d=o("Before reading this guide, you'd better learn the VuePress "),b=o("architecture"),g=o(" first."),m=e("h2",{id:"create-a-plugin",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#create-a-plugin","aria-hidden":"true"},"#"),o(" Create a Plugin")],-1),h=o("A VuePress plugin is a plain JavaScript object that satisfies the "),k=o("Plugin API"),f=o(", which is called a "),v=e("em",null,"Plugin Object",-1),j=o("."),y=e("p",null,[o("If a plugin wants to receive user options, it could be a function that returns a "),e("em",null,"Plugin Object"),o(", which is called a "),e("em",null,"Plugin Function"),o(".")],-1),x=e("div",{class:"theme-code-light"},[e("div",{class:"language-javascript ext-js line-numbers-mode"},[e("pre",{class:"language-javascript"},[e("code",null,[e("span",{class:"token keyword"},"const"),o(" fooPlugin "),e("span",{class:"token operator"},"="),o(),e("span",{class:"token punctuation"},"{"),o("\n  name"),e("span",{class:"token operator"},":"),o(),e("span",{class:"token string"},"'vuepress-plugin-foo'"),e("span",{class:"token punctuation"},","),o("\n  "),e("span",{class:"token comment"},"// ..."),o("\n"),e("span",{class:"token punctuation"},"}"),o("\n")])]),e("div",{class:"line-numbers"},[e("span",{class:"line-number"},"1"),e("br"),e("span",{class:"line-number"},"2"),e("br"),e("span",{class:"line-number"},"3"),e("br"),e("span",{class:"line-number"},"4"),e("br")])])],-1),P=e("div",{class:"theme-code-light"},[e("div",{class:"language-javascript ext-js line-numbers-mode"},[e("pre",{class:"language-javascript"},[e("code",null,[e("span",{class:"token keyword"},"const"),o(),e("span",{class:"token function-variable function"},"fooPlugin"),o(),e("span",{class:"token operator"},"="),o(),e("span",{class:"token punctuation"},"("),e("span",{class:"token parameter"},[o("options"),e("span",{class:"token punctuation"},","),o(" app")]),e("span",{class:"token punctuation"},")"),o(),e("span",{class:"token operator"},"=>"),o(),e("span",{class:"token punctuation"},"{"),o("\n  "),e("span",{class:"token keyword"},"return"),o(),e("span",{class:"token punctuation"},"{"),o("\n    name"),e("span",{class:"token operator"},":"),o(),e("span",{class:"token string"},"'vuepress-plugin-foo'"),e("span",{class:"token punctuation"},","),o("\n    "),e("span",{class:"token comment"},"// ..."),o("\n  "),e("span",{class:"token punctuation"},"}"),o("\n"),e("span",{class:"token punctuation"},"}"),o("\n")])]),e("div",{class:"line-numbers"},[e("span",{class:"line-number"},"1"),e("br"),e("span",{class:"line-number"},"2"),e("br"),e("span",{class:"line-number"},"3"),e("br"),e("span",{class:"line-number"},"4"),e("br"),e("span",{class:"line-number"},"5"),e("br"),e("span",{class:"line-number"},"6"),e("br")])])],-1),q=i('<h2 id="publish-to-npm" tabindex="-1"><a class="header-anchor" href="#publish-to-npm" aria-hidden="true">#</a> Publish to NPM</h2><p>The typical structure of a plugin package is as follow:</p><div class="theme-code-light"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>vuepress-plugin-foo\n├─ lib\n│  └─ index.js\n└─ package.json\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></div><h3 id="plugin-entry" tabindex="-1"><a class="header-anchor" href="#plugin-entry" aria-hidden="true">#</a> Plugin Entry</h3><p>The <code>lib/index.js</code> file is the plugin entry, which should export the plugin directly:</p>',5),w=e("div",{class:"theme-code-light"},[e("div",{class:"language-javascript ext-js line-numbers-mode"},[e("pre",{class:"language-javascript"},[e("code",null,[o("module"),e("span",{class:"token punctuation"},"."),o("exports "),e("span",{class:"token operator"},"="),o(" fooPlugin\n")])]),e("div",{class:"line-numbers"},[e("span",{class:"line-number"},"1"),e("br")])])],-1),_=e("div",{class:"theme-code-light"},[e("div",{class:"language-javascript ext-js line-numbers-mode"},[e("pre",{class:"language-javascript"},[e("code",null,[e("span",{class:"token keyword"},"export"),o(),e("span",{class:"token keyword"},"default"),o(" fooPlugin\n")])]),e("div",{class:"line-numbers"},[e("span",{class:"line-number"},"1"),e("br")])])],-1),S={class:"custom-container tip"},C=e("p",{class:"custom-container-title"},"TIP",-1),I=e("p",null,"Notice that the plugin entry will be loaded in Node, so it should be in CommonJS format.",-1),M=o("If you are using ESM format, you'll need to use "),N={href:"https://babeljs.io/",target:"_blank",rel:"noopener noreferrer"},T=o("babel"),J=o(" or "),O={href:"https://www.typescriptlang.org/",target:"_blank",rel:"noopener noreferrer"},E=o("typescript"),F=o(" to transpile it into CommonJS."),A=e("h3",{id:"package-json",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#package-json","aria-hidden":"true"},"#"),o(" package.json")],-1),G=o("The "),L={href:"https://docs.npmjs.com/cli/v6/configuring-npm/package-json",target:"_blank",rel:"noopener noreferrer"},V=o("package.json"),B=o(" file is required to publish a package to NPM:"),R=i('<div class="theme-code-light"><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>\n  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vuepress-plugin-foo&quot;</span><span class="token punctuation">,</span>\n  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>\n  <span class="token property">&quot;keywords&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>\n    <span class="token string">&quot;vuepress-plugin&quot;</span><span class="token punctuation">,</span>\n  <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;lib/index.js&quot;</span><span class="token punctuation">,</span>\n  <span class="token property">&quot;files&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>\n    <span class="token string">&quot;lib&quot;</span>\n  <span class="token punctuation">]</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></div><ul><li>Set <code>name</code> to follow the naming convention: <code>vuepress-plugin-xxx</code> or <code>@org/vuepress-plugin-xxx</code>.</li><li>Set <code>keywords</code> to include <code>vuepress-plugin</code>, so that users can search your plugin on NPM.</li><li>Set <code>main</code> to the plugin entry file.</li><li>Set <code>files</code> to only publish those files inside <code>lib</code> directory.</li></ul>',2);p.render=function(o,i){const p=n("RouterLink"),W=n("CodeGroupItem"),z=n("CodeGroup"),D=n("OutboundLink");return s(),a(l,null,[r,e("div",c,[u,e("p",null,[d,e(p,{to:"/advanced/architecture.html"},{default:t((()=>[b])),_:1}),g])]),m,e("p",null,[h,e(p,{to:"/reference/plugin-api.html"},{default:t((()=>[k])),_:1}),f,v,j]),y,e(z,null,{default:t((()=>[e(W,{title:"Plugin Object",active:""},{default:t((()=>[x])),_:1}),e(W,{title:"Plugin Function"},{default:t((()=>[P])),_:1})])),_:1}),q,e(z,null,{default:t((()=>[e(W,{title:"CJS",active:""},{default:t((()=>[w])),_:1}),e(W,{title:"ESM"},{default:t((()=>[_])),_:1})])),_:1}),e("div",S,[C,I,e("p",null,[M,e("a",N,[T,e(D)]),J,e("a",O,[E,e(D)]),F])]),A,e("p",null,[G,e("a",L,[V,e(D)]),B]),R],64)};export default p;
