import{r as n,o as s,c as a,a as e,w as t,F as p,b as o,d as l}from"./app.bd6623af.js";const c={},u=e("h1",{id:"开发主题",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#开发主题","aria-hidden":"true"},"#"),o(" 开发主题")],-1),r={class:"custom-container tip"},i=e("p",{class:"custom-container-title"},"提示",-1),k=o("在阅读该指南之前，你最好先了解一下 "),d=o("开发插件"),m=o(" 指南。"),b=e("h2",{id:"创建一个主题",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#创建一个主题","aria-hidden":"true"},"#"),o(" 创建一个主题")],-1),g=o("VuePress 主题是一个特殊的插件，它应该符合 "),v=o("主题 API"),h=o(" 。和插件一样，主题可以是一个 "),f=e("em",null,"主题对象",-1),y=o(" 或一个 "),j=e("em",null,"主题函数",-1),x=o(" 。"),q=e("div",{class:"theme-code-dark"},[e("div",{class:"language-javascript ext-js line-numbers-mode"},[e("pre",{class:"language-javascript"},[e("code",null,[e("span",{class:"token keyword"},"const"),o(),e("span",{class:"token punctuation"},"{"),o(" path "),e("span",{class:"token punctuation"},"}"),o(),e("span",{class:"token operator"},"="),o(),e("span",{class:"token function"},"require"),e("span",{class:"token punctuation"},"("),e("span",{class:"token string"},"'@vuepress/utils'"),e("span",{class:"token punctuation"},")"),o("\n\n"),e("span",{class:"token keyword"},"const"),o(" fooTheme "),e("span",{class:"token operator"},"="),o(),e("span",{class:"token punctuation"},"{"),o("\n  name"),e("span",{class:"token operator"},":"),o(),e("span",{class:"token string"},"'vuepress-theme-foo'"),e("span",{class:"token punctuation"},","),o("\n  layouts"),e("span",{class:"token operator"},":"),o(),e("span",{class:"token punctuation"},"{"),o("\n    Layout"),e("span",{class:"token operator"},":"),o(" path"),e("span",{class:"token punctuation"},"."),e("span",{class:"token function"},"resolve"),e("span",{class:"token punctuation"},"("),o("__dirname"),e("span",{class:"token punctuation"},","),o(),e("span",{class:"token string"},"'layouts/Layout.vue'"),e("span",{class:"token punctuation"},")"),e("span",{class:"token punctuation"},","),o("\n    "),e("span",{class:"token number"},"404"),e("span",{class:"token operator"},":"),o(" path"),e("span",{class:"token punctuation"},"."),e("span",{class:"token function"},"resolve"),e("span",{class:"token punctuation"},"("),o("__dirname"),e("span",{class:"token punctuation"},","),o(),e("span",{class:"token string"},"'layouts/404.vue'"),e("span",{class:"token punctuation"},")"),e("span",{class:"token punctuation"},","),o("\n  "),e("span",{class:"token punctuation"},"}"),e("span",{class:"token punctuation"},","),o("\n  "),e("span",{class:"token comment"},"// ..."),o("\n"),e("span",{class:"token punctuation"},"}"),o("\n")])]),e("div",{class:"line-numbers"},[e("span",{class:"line-number"},"1"),e("br"),e("span",{class:"line-number"},"2"),e("br"),e("span",{class:"line-number"},"3"),e("br"),e("span",{class:"line-number"},"4"),e("br"),e("span",{class:"line-number"},"5"),e("br"),e("span",{class:"line-number"},"6"),e("br"),e("span",{class:"line-number"},"7"),e("br"),e("span",{class:"line-number"},"8"),e("br"),e("span",{class:"line-number"},"9"),e("br"),e("span",{class:"line-number"},"10"),e("br")])])],-1),_=e("div",{class:"theme-code-dark"},[e("div",{class:"language-javascript ext-js line-numbers-mode"},[e("pre",{class:"language-javascript"},[e("code",null,[e("span",{class:"token keyword"},"const"),o(),e("span",{class:"token punctuation"},"{"),o(" path "),e("span",{class:"token punctuation"},"}"),o(),e("span",{class:"token operator"},"="),o(),e("span",{class:"token function"},"require"),e("span",{class:"token punctuation"},"("),e("span",{class:"token string"},"'@vuepress/utils'"),e("span",{class:"token punctuation"},")"),o("\n\n"),e("span",{class:"token keyword"},"const"),o(),e("span",{class:"token function-variable function"},"fooTheme"),o(),e("span",{class:"token operator"},"="),o(),e("span",{class:"token punctuation"},"("),e("span",{class:"token parameter"},[o("options"),e("span",{class:"token punctuation"},","),o(" app")]),e("span",{class:"token punctuation"},")"),o(),e("span",{class:"token operator"},"=>"),o(),e("span",{class:"token punctuation"},"{"),o("\n  "),e("span",{class:"token keyword"},"return"),o(),e("span",{class:"token punctuation"},"{"),o("\n    name"),e("span",{class:"token operator"},":"),o(),e("span",{class:"token string"},"'vuepress-theme-foo'"),e("span",{class:"token punctuation"},","),o("\n    layouts"),e("span",{class:"token operator"},":"),o(),e("span",{class:"token punctuation"},"{"),o("\n      Layout"),e("span",{class:"token operator"},":"),o(" path"),e("span",{class:"token punctuation"},"."),e("span",{class:"token function"},"resolve"),e("span",{class:"token punctuation"},"("),o("__dirname"),e("span",{class:"token punctuation"},","),o(),e("span",{class:"token string"},"'layouts/Layout.vue'"),e("span",{class:"token punctuation"},")"),e("span",{class:"token punctuation"},","),o("\n      "),e("span",{class:"token number"},"404"),e("span",{class:"token operator"},":"),o(" path"),e("span",{class:"token punctuation"},"."),e("span",{class:"token function"},"resolve"),e("span",{class:"token punctuation"},"("),o("__dirname"),e("span",{class:"token punctuation"},","),o(),e("span",{class:"token string"},"'layouts/404.vue'"),e("span",{class:"token punctuation"},")"),e("span",{class:"token punctuation"},","),o("\n    "),e("span",{class:"token punctuation"},"}"),e("span",{class:"token punctuation"},","),o("\n    "),e("span",{class:"token comment"},"// ..."),o("\n  "),e("span",{class:"token punctuation"},"}"),o("\n"),e("span",{class:"token punctuation"},"}"),o("\n")])]),e("div",{class:"line-numbers"},[e("span",{class:"line-number"},"1"),e("br"),e("span",{class:"line-number"},"2"),e("br"),e("span",{class:"line-number"},"3"),e("br"),e("span",{class:"line-number"},"4"),e("br"),e("span",{class:"line-number"},"5"),e("br"),e("span",{class:"line-number"},"6"),e("br"),e("span",{class:"line-number"},"7"),e("br"),e("span",{class:"line-number"},"8"),e("br"),e("span",{class:"line-number"},"9"),e("br"),e("span",{class:"line-number"},"10"),e("br"),e("span",{class:"line-number"},"11"),e("br"),e("span",{class:"line-number"},"12"),e("br")])])],-1),w=e("p",null,[e("code",null,"layouts"),o(" 字段声明了你的主题提供的布局。")],-1),L=e("p",null,[o("一个主题必须提供至少两个布局："),e("code",null,"Layout"),o(" 和 "),e("code",null,"404"),o(" 。")],-1),C=e("code",null,"Layout",-1),P=o(" 布局应该包含 "),M=o("Content"),N=o(" 组件来展示 Markdown 内容："),S=l('<div class="theme-code-dark"><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>\n    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>Content</span> <span class="token punctuation">/&gt;</span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></div><p><code>404</code> 布局会被用于 <code>404.html</code> 页面：</p><div class="theme-code-dark"><div class="language-vue ext-vue line-numbers-mode"><pre class="language-vue"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>template</span><span class="token punctuation">&gt;</span></span>\n  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span><span class="token punctuation">&gt;</span></span>404 Not Found<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">&gt;</span></span>\n<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>template</span><span class="token punctuation">&gt;</span></span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></div>',3),z=o("你可以提供多个布局，用户可以通过 "),T=o("layout"),F=o(" Frontmatter 来修改布局。"),J=l('<h2 id="发布到-npm" tabindex="-1"><a class="header-anchor" href="#发布到-npm" aria-hidden="true">#</a> 发布到 NPM</h2><p>一个典型的主题 Package 的结构如下所示：</p><div class="theme-code-dark"><div class="language-bash ext-sh line-numbers-mode"><pre class="language-bash"><code>vuepress-theme-foo\n├─ lib\n│  ├─ layouts\n│  │  ├─ Layout.vue\n│  │  └─ <span class="token number">404</span>.vue\n│  └─ index.js\n└─ package.json\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></div><h3 id="主题入口" tabindex="-1"><a class="header-anchor" href="#主题入口" aria-hidden="true">#</a> 主题入口</h3><p><code>lib/index.js</code> 文件是主题入口，它应当直接导出主题：</p>',5),E=e("div",{class:"theme-code-dark"},[e("div",{class:"language-javascript ext-js line-numbers-mode"},[e("pre",{class:"language-javascript"},[e("code",null,[o("module"),e("span",{class:"token punctuation"},"."),o("exports "),e("span",{class:"token operator"},"="),o(" fooTheme\n")])]),e("div",{class:"line-numbers"},[e("span",{class:"line-number"},"1"),e("br")])])],-1),G=e("div",{class:"theme-code-dark"},[e("div",{class:"language-javascript ext-js line-numbers-mode"},[e("pre",{class:"language-javascript"},[e("code",null,[e("span",{class:"token keyword"},"export"),o(),e("span",{class:"token keyword"},"default"),o(" fooTheme\n")])]),e("div",{class:"line-numbers"},[e("span",{class:"line-number"},"1"),e("br")])])],-1),I={class:"custom-container tip"},A=e("p",{class:"custom-container-title"},"提示",-1),O=e("p",null,"注意，主题入口会在 Node 中被加载，因此它应为 CommonJS 格式。",-1),R=o("如果你使用 ESM 格式，你需要使用 "),V={href:"https://babeljs.io/",target:"_blank",rel:"noopener noreferrer"},B=o("babel"),D=o(" 或 "),H={href:"https://www.typescriptlang.org/",target:"_blank",rel:"noopener noreferrer"},K=o("typescript"),Q=o(" 来将它编译成 CommonJS 。"),U=e("h3",{id:"package-json",tabindex:"-1"},[e("a",{class:"header-anchor",href:"#package-json","aria-hidden":"true"},"#"),o(" package.json")],-1),W=o("为了把 Package 发布到 NPM 上，"),X={href:"https://docs.npmjs.com/cli/v6/configuring-npm/package-json",target:"_blank",rel:"noopener noreferrer"},Y=o("package.json"),Z=o(" 文件是必需的："),$=l('<div class="theme-code-dark"><div class="language-json ext-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>\n  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;vuepress-theme-foo&quot;</span><span class="token punctuation">,</span>\n  <span class="token property">&quot;version&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0&quot;</span><span class="token punctuation">,</span>\n  <span class="token property">&quot;keywords&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>\n    <span class="token string">&quot;vuepress-theme&quot;</span><span class="token punctuation">,</span>\n  <span class="token punctuation">]</span><span class="token punctuation">,</span>\n  <span class="token property">&quot;main&quot;</span><span class="token operator">:</span> <span class="token string">&quot;lib/index.js&quot;</span><span class="token punctuation">,</span>\n  <span class="token property">&quot;files&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>\n    <span class="token string">&quot;lib&quot;</span>\n  <span class="token punctuation">]</span>\n<span class="token punctuation">}</span>\n</code></pre><div class="line-numbers"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></div><ul><li>将 <code>name</code> 按照约定命名： <code>vuepress-theme-xxx</code> 或 <code>@org/vuepress-theme-xxx</code> 。</li><li>在 <code>keywords</code> 中包含 <code>vuepress-theme</code> ，这样用户可以在 NPM 上搜索到你的主题。</li><li>将 <code>main</code> 设为主题入口文件。</li><li>设置 <code>files</code> ，仅发布 <code>lib</code> 目录下的文件。</li></ul>',2);c.render=function(o,l){const c=n("RouterLink"),nn=n("CodeGroupItem"),sn=n("CodeGroup"),an=n("OutboundLink");return s(),a(p,null,[u,e("div",r,[i,e("p",null,[k,e(c,{to:"/zh/advanced/plugin.html"},{default:t((()=>[d])),_:1}),m])]),b,e("p",null,[g,e(c,{to:"/zh/reference/theme-api.html"},{default:t((()=>[v])),_:1}),h,f,y,j,x]),e(sn,null,{default:t((()=>[e(nn,{title:"主题对象",active:""},{default:t((()=>[q])),_:1}),e(nn,{title:"主题函数"},{default:t((()=>[_])),_:1})])),_:1}),w,L,e("p",null,[C,P,e(c,{to:"/zh/reference/components.html#content"},{default:t((()=>[M])),_:1}),N]),S,e("p",null,[z,e(c,{to:"/zh/reference/frontmatter.html#layout"},{default:t((()=>[T])),_:1}),F]),J,e(sn,null,{default:t((()=>[e(nn,{title:"CJS",active:""},{default:t((()=>[E])),_:1}),e(nn,{title:"ESM"},{default:t((()=>[G])),_:1})])),_:1}),e("div",I,[A,O,e("p",null,[R,e("a",V,[B,e(an)]),D,e("a",H,[K,e(an)]),Q])]),U,e("p",null,[W,e("a",X,[Y,e(an)]),Z]),$],64)};export default c;
